# ========================================
# Ultimate Scalping 30分钟优化配置
# ========================================
# 使用方法: source .env.30m_optimized && python main.py

# ===== 交易所配置 =====
USE_DEMO=false
BINANCE_API_KEY=your_api_key_here
BINANCE_SECRET=your_secret_here

# ===== 时间周期 =====
TIMEFRAME=30m

# ===== 交易品种 =====
CONTRACT_SYMBOLS=BTC/USDC:USDC,ETH/USDC:USDC,SOL/USDC:USDC,BNB/USDC:USDC

# ===== 止盈止损（保守方案） =====
SCALPING_TAKE_PROFIT_PCT=2.0    # 2%止盈（从3.0降低，更容易达到）
SCALPING_STOP_LOSS_PCT=1.0       # 1%止损（从1.5降低，减少亏损）
SCALPING_REVERSAL_EXIT=true      # 反向信号时平仓

# 注意：如果想用激进方案，可改为:
# SCALPING_TAKE_PROFIT_PCT=3.0
# SCALPING_STOP_LOSS_PCT=1.5

# ===== 仓位管理（保守方案） =====
POSITION_SIZING_MODE=percentage
POSITION_SIZE_PCT=0.15           # 15%仓位（从0.30降低）
LEVERAGE=10
MARGIN_MODE=cross
POSITION_MODE=hedge

# 注意：如果想用平衡方案，可改为:
# POSITION_SIZE_PCT=0.20

# ===== EMA参数（保持不变） =====
EMA_FAST_LENGTH=20               # 20 × 30分钟 = 10小时
EMA_SLOW_LENGTH=50               # 50 × 30分钟 = 25小时

# ===== RSI参数 =====
RSI_LENGTH=14                    # 14 × 30分钟 = 7小时
# 注意：RSI阈值已在代码中修改为60/40（原55/45）

# ===== SuperTrend参数 =====
ATR_LENGTH=10                    # 从5增加到10（5小时ATR，更平滑）
MIN_MULT=1.5                     # 从0.8提高到1.5（避免过窄带宽）
MAX_MULT=3.0                     # 从3.5降至3.0
SUPERTREND_MULT=3.0              # 固定值（实际由KMeans选择）
STEP=0.5

# ===== KMeans参数 =====
REGIME_LOOKBACK=96               # 96 × 30分钟 = 48小时（2天）
METRIC_LOOKBACK=96               # 从40增加到96
N_CLUSTERS=3
SELECTION=regime_kmeans

# ===== 风控参数 =====
ALLOW_INITIAL_POSITION=true      # 允许初始仓位
DAILY_DRAWDOWN_LIMIT=0.10        # 日回撤10%
OVERALL_DRAWDOWN_LIMIT=0.30      # 总回撤30%

# ===== 其他配置 =====
STRATEGY_NAME=ultimate_scalping
LOG_LEVEL=INFO
CSV_LOG_FILE=trade_log.csv
FETCH_LIMIT=900

# ===== 成本模型 =====
SLIPPAGE_RATE=0.0001
FEE_RATE=0.0000275

# ========================================
# 修改说明:
# 1. 止盈止损: 3.0%/1.5% → 2.0%/1.0%（保守）
# 2. 仓位: 30% → 15%（控制风险）
# 3. ATR周期: 5 → 10（更平滑）
# 4. SuperTrend factor下限: 0.8 → 1.5（减少假信号）
# 5. KMeans回看: 40 → 96（2天数据）
# 6. RSI阈值: 在代码中改为60/40
# 7. 重入条件: 在代码中收紧范围
# 8. 新增: ATR波动率过滤（0.3%）
# 9. 新增: 时间过滤（亚洲早盘+周末）
# ========================================
